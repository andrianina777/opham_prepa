{"ast":null,"code":"import { defineComponent } from 'vue';\nimport { VDataTable } from 'vuetify/labs/VDataTable';\nimport { useAlerteStore } from \"@/store/utils/alerte.js\";\nimport { ref, onMounted, onBeforeMount, computed } from 'vue';\nimport dayjs from 'dayjs';\nexport default defineComponent({\n  components: {\n    VDataTable\n  },\n  emits: ['action1Item', 'action2Item', 'handleCheckboxClick'],\n  props: {\n    headers: Object,\n    items: Object,\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    action1: String,\n    action2: String,\n    titre_list: String,\n    itemslist: Object,\n    header_text: String,\n    alerte: String,\n    etape: String,\n    showAction1: {\n      type: Boolean,\n      default: false\n    }\n  },\n  defaults: {\n    VDataTable: {\n      fixedHeader: true,\n      noDataText: 'Pas de resultats'\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    // const m_date = ref(null);\n    // const useformatDate = useformatDate();\n    const storeAlert = useAlerteStore();\n    const loading = ref(false);\n    const alerte = ref('');\n    const action1PItem = item => {\n      emit('action1Item', item);\n    };\n    const action2PItem = item => {\n      emit('action2Item', item);\n    };\n    const handleCheckboxClick = item => {\n      emit('handleCheckboxClick', item);\n    };\n    const emitEvent = () => {\n      emit('my-alert', alerte);\n      emit('my-val', storeAlert.alertes.val);\n    };\n    const fetchAlerte = async () => {\n      storeAlert.params.code = props.etape;\n      if (props.etape) {\n        await storeAlert.fetchAlerte();\n        alerte.value = storeAlert.alertes.alerte;\n      }\n    };\n    const formatDateTime = date => {\n      if (date !== null && date !== '') {\n        return dayjs(date).format('DD/MM/YYYY HH:mm');\n      } else {\n        return '';\n      }\n    };\n    const formatDate = date => {\n      if (date !== null && date !== '') {\n        return dayjs(date).format('DD/MM/YYYY');\n      } else {\n        return '';\n      }\n    };\n    const getColor = valeur => {\n      if (valeur.trim() == \"OR\") return '#ff66ff';else if (valeur.trim() == \"ARGENT\") return '#ffff00';else if (valeur.trim() == \"BRONZE\") return '#99ffff';else if (valeur.trim() == \"FER\") return '#c0c0c0';\n    };\n    onMounted(() => {\n      fetchAlerte();\n      emitEvent();\n    });\n    const getUrgent = item => {\n      if (item.raw.prioritaire == 1 && item.raw.province == 1 && item.raw.duree_atte_prep >= alerte.value) {\n        item.raw.urgent = 1;\n      }\n      if (item.raw.urgent + item.raw.aprendre == 2) {\n        return '#FF0000';\n      } else if (item.raw.urgent == 0 && item.raw.aprendre == 0 && item.raw.garde == 1) {\n        return '#ff9933';\n      } else if (item.raw.urgent == 1 && item.raw.aprendre == 0) {\n        return '#00cc00';\n      } else if (item.raw.urgent == 0 && item.raw.aprendre == 1) {\n        return '#0099ff';\n      }\n    };\n    return {\n      action1PItem,\n      action2PItem,\n      getColor,\n      getUrgent,\n      fetchAlerte,\n      emitEvent,\n      handleCheckboxClick,\n      formatDate,\n      formatDateTime\n    };\n  }\n\n  // getUrgent(item) {\n  //     if(item.raw.prioritaire=1 && item.raw.province==1 && item.raw.duree_atte_prep>= ){\n\n  //     }\n\n  // }\n});","map":{"version":3,"mappings":"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","names":["defineComponent","VDataTable","useAlerteStore","ref","onMounted","onBeforeMount","computed","dayjs","components","emits","props","headers","Object","items","loading","type","Boolean","default","action1","String","action2","titre_list","itemslist","header_text","alerte","etape","showAction1","defaults","fixedHeader","noDataText","setup","emit","storeAlert","action1PItem","item","action2PItem","handleCheckboxClick","emitEvent","alertes","val","fetchAlerte","params","code","value","formatDateTime","date","format","formatDate","getColor","valeur","trim","getUrgent","raw","prioritaire","province","duree_atte_prep","urgent","aprendre","garde"],"sourceRoot":"","sources":["/Users/anjaniainaandrianina/Desktop/Project/prepa/ERPO/frontend_prepa/prepa/src/components/MyTable.vue"],"sourcesContent":["<template >\n    <v-data-table class=\"blue-header\" :headers=\"headers\" :items=\"items\"  :fixed-header=\"true\" v-if=\"!loading\" \n        :loading=\"loading\" density=\"compact\" :etape=\"etape\" :items-per-page=\"-1\">\n        <template v-slot:[`item.actions`]=\"{ item }\">\n            <template v-if=\"showAction1\">\n                <v-btn size=\"x-small\" color=\"blue\" @click=\"action1PItem(item)\">\n                    {{ action1 }}\n                </v-btn>\n                <v-spacer />\n            </template>\n            <v-spacer />\n            <v-btn size=\"x-small\" color=\"blue-grey\" @click=\"action2PItem(item)\">\n                {{ action2 }}\n            </v-btn>\n        </template>\n        <template v-slot:[`item.date_com`]=\"{ item }\">\n            <v-chip label :color=\"getColor(item.raw.valeur)\" text-color=\"#000000\">\n                {{ item.raw.date_com }}\n            </v-chip>\n        </template>\n\n        <template v-slot:[`item.code`]=\"{ item }\">\n            <span :style=\"{ color: getUrgent(item) }\">{{ item.raw.code }}</span>\n            <!-- <v-icon\n                :style=\"{ color: getUrgent(item) }\"\n                icon=\"mdi-check-circle\"\n                size=\"small\"\n                ></v-icon> -->\n                <v-btn \n                width=\"20\"\n                variant=\"tonal\"\n                :style=\"{ color: getUrgent(item) }\"\n                ></v-btn>\n\n                <v-icon\n                    :color=\"getColor(item.raw.valeur)\"\n                    icon=\"mdi-check-circle\"\n                    size=\"small\"\n                ></v-icon>\n        </template>\n\n        <template v-slot:[`item.etat`]=\"{ item }\">\n            <v-checkbox-btn v-model=\"item.raw.etat\" color=\"primary\" hide-details\n                :disabled=\"item.raw.transfert === 'Transfert' || item.raw.transfert === 'Sans Empl' || item.raw.transfert === 'Porte'\"\n                @click=\"handleCheckboxClick(item)\"></v-checkbox-btn>\n        </template>\n        <template v-slot:[`header.etat`]=\"{ header }\">\n            <v-checkbox v-model=\"selectAll\" :indeterminate=\"indeterminate\" :label=\"header.text\"\n                :disabled=\"desserts.length == 0\" @click.native.stop @change=\"toggleAll\"></v-checkbox>\n        </template>\n        <template #footer>\n            <div class=\"text-center\">\n                This is the footer text.\n            </div>\n        </template>\n        <!-- <template v-slot:item.date_prevue_liv=\"{ item }\">\n            {{ formatDate(item.date_prevue_liv) }}\n        </template> -->\n        <template v-slot:[`item.date_prevue_liv`]=\"{ item }\">\n            {{ formatDateTime(item.raw.date_prevue_liv) }}\n        </template>\n        <template v-slot:[`item.datecre_BP`]=\"{ item }\">\n            {{ formatDateTime(item.raw.datecre_BP) }}\n        </template>\n        <template v-slot:[`item.date_com`]=\"{ item }\">\n            {{ formatDate(item.raw.date_com) }}\n        </template>\n        <!-- <span>{{ useDateTime(value).dateTime.value.slice(1, -1) }}</span> -->\n\n\n        <!-- <template #headerCell=\"{ header }\">\n            <v-checkbox v-if=\"header.value === 'select'\" :input-value=\"selectAll\" hide-details @click.stop></v-checkbox>\n            <span v-else>{{ header.text }}</span>\n        </template> -->\n\n        <!-- <template #item=\"{ item }\">\n            <tr :style=\"{color : getUrgent(item)}\">\n                <td>\n                    {{ item.raw.code }}\n                </td>\n                <td>\n                    {{ item.raw.date_com }}\n                </td>\n                <td>{{ item.raw.date_prevue_liv }}</td>\n                <td>{{ item.raw.nom_client }}</td>\n                <td>{{ item.raw.commentaire }}</td>\n                <td>{{ item.raw.axe }}</td>\n                <td>{{ item.raw.duree_atte_prep }}</td>\n                <td>{{ item.raw.resume }}</td>\n                <td>{{ item.raw.nbLigne }}</td>\n                <td>{{ item.raw.situationmag }}</td>\n                <td>{{ item.raw.actions }}</td>\n            </tr>\n        </template> -->\n        <!-- <span :style=\"{ color: item.raw.nbLigne > 3 ? 'green' : 'red' }\">{{ item.raw.date_com }}</span> -->\n    </v-data-table>\n</template>\n<script>\nimport { defineComponent } from 'vue';\nimport { VDataTable } from 'vuetify/labs/VDataTable';\nimport { useAlerteStore } from \"@/store/utils/alerte.js\"\nimport { ref, onMounted, onBeforeMount, computed } from 'vue';\nimport dayjs from 'dayjs';\nexport default defineComponent({\n    components: {\n        VDataTable,\n    },\n    emits: ['action1Item', 'action2Item', 'handleCheckboxClick'],\n    props: {\n        headers: Object,\n        items: Object,\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        action1: String,\n        action2: String,\n        titre_list: String,\n        itemslist: Object,\n        header_text: String,\n        alerte: String,\n        etape: String,\n        showAction1: {\n            type: Boolean,\n            default: false\n        },\n    },\n    defaults: {\n        VDataTable: {\n            fixedHeader: true,\n            noDataText: 'Pas de resultats',\n        },\n    },\n\n    setup(props, { emit }) {\n        // const m_date = ref(null);\n        // const useformatDate = useformatDate();\n        const storeAlert = useAlerteStore();\n        const loading = ref(false);\n        const alerte = ref('');\n        const action1PItem = (item) => {\n            emit('action1Item', item);\n        };\n        const action2PItem = (item) => {\n            emit('action2Item', item);\n        };\n        const handleCheckboxClick = (item) => {\n            emit('handleCheckboxClick', item);\n        };\n        const emitEvent = () => {\n            emit('my-alert', alerte);\n            emit('my-val', storeAlert.alertes.val)\n        };\n\n        const fetchAlerte = async () => {\n            storeAlert.params.code = props.etape;\n            if (props.etape) {\n                await storeAlert.fetchAlerte();\n                alerte.value = storeAlert.alertes.alerte;\n            }\n        }\n\n\n        const formatDateTime = (date) => {\n            if(date!==null && date!==''){\n                return dayjs(date).format('DD/MM/YYYY HH:mm');\n            } else {\n                return '';\n            }\n           \n        };\n\n        const formatDate = (date) => {\n            if(date!==null && date!==''){\n                return dayjs(date).format('DD/MM/YYYY');\n            } else {\n                return '';\n            }\n           \n        };\n\n        const getColor = (valeur) => {\n            if (valeur.trim() == \"OR\") return '#ff66ff';\n            else if (valeur.trim() == \"ARGENT\") return '#ffff00';\n            else if (valeur.trim() == \"BRONZE\") return '#99ffff';\n            else if (valeur.trim() == \"FER\") return '#c0c0c0';\n        };\n        onMounted(() => {\n            fetchAlerte();\n            emitEvent();\n\n        })\n\n        const getUrgent = (item) => {\n\n            if (item.raw.prioritaire == 1 && item.raw.province == 1 && item.raw.duree_atte_prep >= alerte.value) {\n                item.raw.urgent = 1\n\n            }\n            if ((item.raw.urgent + item.raw.aprendre) == 2) {\n                return '#FF0000';\n            }\n            else if (item.raw.urgent == 0 && item.raw.aprendre == 0 && item.raw.garde == 1) {\n                return '#ff9933';\n            }\n            else if (item.raw.urgent == 1 && item.raw.aprendre == 0) {\n                return '#00cc00';\n            }\n            else if (item.raw.urgent == 0 && item.raw.aprendre == 1) {\n                return '#0099ff';\n            }\n\n        };\n\n        return { action1PItem, action2PItem, getColor, getUrgent, fetchAlerte, emitEvent, handleCheckboxClick, formatDate,formatDateTime };\n    }\n\n\n\n    // getUrgent(item) {\n    //     if(item.raw.prioritaire=1 && item.raw.province==1 && item.raw.duree_atte_prep>= ){\n\n    //     }\n\n    // }\n});\n</script>\n  \n\n<style>\n.v-data-table.blue-header .v-table__wrapper>table>thead>tr th,\n.v-data-table.blue-header .v-table__wrapper>table tbody>tr th {\n    background-color: #b8b3cc;\n    white-space: nowrap;\n}\n\n/* .v-table > .v-table__wrapper > table > tbody > tr:nth-child(-n+2) td{\n      background: #e1eed7;\n    } */\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}