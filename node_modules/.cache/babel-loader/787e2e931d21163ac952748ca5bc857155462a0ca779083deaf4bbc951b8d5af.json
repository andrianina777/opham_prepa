{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-center\"\n}, \" This is the footer text. \", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_chip = _resolveComponent(\"v-chip\");\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_avatar = _resolveComponent(\"v-avatar\");\n  const _component_v_checkbox_btn = _resolveComponent(\"v-checkbox-btn\");\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\");\n  const _component_v_data_table = _resolveComponent(\"v-data-table\");\n  return !_ctx.loading ? (_openBlock(), _createBlock(_component_v_data_table, {\n    key: 0,\n    class: \"blue-header\",\n    headers: _ctx.headers,\n    items: _ctx.items,\n    \"fixed-header\": true,\n    loading: _ctx.loading,\n    density: \"compact\",\n    etape: _ctx.etape,\n    \"items-per-page\": -1\n  }, {\n    [`item.actions`]: _withCtx(({\n      item\n    }) => [_ctx.showAction1 ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_createVNode(_component_v_btn, {\n      size: \"x-small\",\n      color: \"blue\",\n      onClick: $event => _ctx.action1PItem(item)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.action1), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_v_spacer)], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n      size: \"x-small\",\n      color: \"blue-grey\",\n      onClick: $event => _ctx.action2PItem(item)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.action2), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n    [`item.date_com`]: _withCtx(({\n      item\n    }) => [_createVNode(_component_v_chip, {\n      label: \"\",\n      color: _ctx.getColor(item.raw.valeur),\n      \"text-color\": \"#000000\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(item.raw.date_com), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"color\"])]),\n    [`item.code`]: _withCtx(({\n      item\n    }) => [_createElementVNode(\"span\", {\n      style: _normalizeStyle({\n        color: _ctx.getUrgent(item)\n      })\n    }, _toDisplayString(item.raw.code), 5 /* TEXT, STYLE */), _createVNode(_component_v_icon, {\n      style: _normalizeStyle({\n        color: _ctx.getUrgent(item)\n      }),\n      icon: \"mdi-information\",\n      size: \"small\"\n    }, null, 8 /* PROPS */, [\"style\"]), _createCommentVNode(\" <v-btn \\n                style =\\\"{width:-1px  ; height:15px;}\\\"\\n                variant=\\\"tonal\\\"\\n                :style=\\\"{ color: getUrgent(item) }\\\"\\n                ></v-btn> \"), _createVNode(_component_v_avatar, {\n      style: _normalizeStyle({\n        color: _ctx.getUrgent(item)\n      }),\n      rounded: \"0\",\n      size: \"10\"\n    }, null, 8 /* PROPS */, [\"style\"]), _createVNode(_component_v_avatar, {\n      color: _ctx.getColor(item.raw.valeur),\n      rounded: \"0\",\n      size: \"10\"\n    }, null, 8 /* PROPS */, [\"color\"]), _createVNode(_component_v_icon, {\n      color: _ctx.getColor(item.raw.valeur),\n      icon: \"mdi-information\",\n      size: \"small\"\n    }, null, 8 /* PROPS */, [\"color\"])]),\n    [`item.etat`]: _withCtx(({\n      item\n    }) => [_createVNode(_component_v_checkbox_btn, {\n      modelValue: item.raw.etat,\n      \"onUpdate:modelValue\": $event => item.raw.etat = $event,\n      color: \"primary\",\n      \"hide-details\": \"\",\n      disabled: item.raw.transfert === 'Transfert' || item.raw.transfert === 'Sans Empl' || item.raw.transfert === 'Porte',\n      onClick: $event => _ctx.handleCheckboxClick(item)\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"disabled\", \"onClick\"])]),\n    [`header.etat`]: _withCtx(({\n      header\n    }) => [_createVNode(_component_v_checkbox, {\n      modelValue: _ctx.selectAll,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.selectAll = $event),\n      indeterminate: _ctx.indeterminate,\n      label: header.text,\n      disabled: _ctx.desserts.length == 0,\n      onClick: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"stop\"])),\n      onChange: _ctx.toggleAll\n    }, null, 8 /* PROPS */, [\"modelValue\", \"indeterminate\", \"label\", \"disabled\", \"onChange\"])]),\n    footer: _withCtx(() => [_hoisted_1]),\n    [`item.date_prevue_liv`]: _withCtx(({\n      item\n    }) => [_createTextVNode(_toDisplayString(_ctx.formatDateTime(item.raw.date_prevue_liv)), 1 /* TEXT */)]),\n\n    [`item.datecre_BP`]: _withCtx(({\n      item\n    }) => [_createTextVNode(_toDisplayString(_ctx.formatDateTime(item.raw.datecre_BP)), 1 /* TEXT */)]),\n\n    [`item.date_com`]: _withCtx(({\n      item\n    }) => [_createTextVNode(_toDisplayString(_ctx.formatDate(item.raw.date_com)), 1 /* TEXT */)]),\n\n    _: 2 /* DYNAMIC */\n  }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"headers\", \"items\", \"loading\", \"etape\"])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","class","_ctx","_createBlock","_component_v_data_table","headers","items","loading","density","etape","_withCtx","item","_createElementBlock","_Fragment","key","_createVNode","_component_v_btn","size","color","onClick","_component_v_spacer","_component_v_chip","label","raw","valeur","date_com","style","code","_component_v_icon","icon","_createCommentVNode","_component_v_avatar","rounded","_component_v_checkbox_btn","etat","disabled","transfert","header","_component_v_checkbox","indeterminate","text","length","onChange","footer","_hoisted_1","date_prevue_liv","datecre_BP"],"sourceRoot":"","sources":["/Users/anjaniainaandrianina/Desktop/Project/prepa/ERPO/frontend_prepa/prepa/src/components/MyTable.vue"],"sourcesContent":["<template >\n    <v-data-table class=\"blue-header\" :headers=\"headers\" :items=\"items\"  :fixed-header=\"true\" v-if=\"!loading\" \n        :loading=\"loading\" density=\"compact\" :etape=\"etape\" :items-per-page=\"-1\">\n        <template v-slot:[`item.actions`]=\"{ item }\">\n            <template v-if=\"showAction1\">\n                <v-btn size=\"x-small\" color=\"blue\" @click=\"action1PItem(item)\">\n                    {{ action1 }}\n                </v-btn>\n                <v-spacer />\n            </template>\n            <v-spacer />\n            <v-btn size=\"x-small\" color=\"blue-grey\" @click=\"action2PItem(item)\">\n                {{ action2 }}\n            </v-btn>\n        </template>\n        <template v-slot:[`item.date_com`]=\"{ item }\">\n            <v-chip label :color=\"getColor(item.raw.valeur)\" text-color=\"#000000\">\n                {{ item.raw.date_com }}\n            </v-chip>\n        </template>\n\n        <template v-slot:[`item.code`]=\"{ item }\">\n            <span :style=\"{ color: getUrgent(item) }\">{{ item.raw.code }}</span>\n            \n            <v-icon\n                :style=\"{ color: getUrgent(item) }\"\n                icon=\"mdi-information\"\n                size=\"small\"\n                ></v-icon>\n                <!-- <v-btn \n                style =\"{width:-1px  ; height:15px;}\"\n                variant=\"tonal\"\n                :style=\"{ color: getUrgent(item) }\"\n                ></v-btn> -->\n\n                <v-avatar  :style=\"{ color: getUrgent(item) }\" rounded=\"0\" size=\"10\"></v-avatar>\n                <v-avatar   :color=\"getColor(item.raw.valeur)\" rounded=\"0\" size=\"10\"></v-avatar>\n\n                <v-icon\n                    :color=\"getColor(item.raw.valeur)\"\n                    icon=\"mdi-information\"\n                    size=\"small\"\n                ></v-icon>\n        </template>\n\n        <template v-slot:[`item.etat`]=\"{ item }\">\n            <v-checkbox-btn v-model=\"item.raw.etat\" color=\"primary\" hide-details\n                :disabled=\"item.raw.transfert === 'Transfert' || item.raw.transfert === 'Sans Empl' || item.raw.transfert === 'Porte'\"\n                @click=\"handleCheckboxClick(item)\"></v-checkbox-btn>\n        </template>\n        <template v-slot:[`header.etat`]=\"{ header }\">\n            <v-checkbox v-model=\"selectAll\" :indeterminate=\"indeterminate\" :label=\"header.text\"\n                :disabled=\"desserts.length == 0\" @click.native.stop @change=\"toggleAll\"></v-checkbox>\n        </template>\n        <template #footer>\n            <div class=\"text-center\">\n                This is the footer text.\n            </div>\n        </template>\n        <!-- <template v-slot:item.date_prevue_liv=\"{ item }\">\n            {{ formatDate(item.date_prevue_liv) }}\n        </template> -->\n        <template v-slot:[`item.date_prevue_liv`]=\"{ item }\">\n            {{ formatDateTime(item.raw.date_prevue_liv) }}\n        </template>\n        <template v-slot:[`item.datecre_BP`]=\"{ item }\">\n            {{ formatDateTime(item.raw.datecre_BP) }}\n        </template>\n        <template v-slot:[`item.date_com`]=\"{ item }\">\n            {{ formatDate(item.raw.date_com) }}\n        </template>\n        <!-- <span>{{ useDateTime(value).dateTime.value.slice(1, -1) }}</span> -->\n\n\n        <!-- <template #headerCell=\"{ header }\">\n            <v-checkbox v-if=\"header.value === 'select'\" :input-value=\"selectAll\" hide-details @click.stop></v-checkbox>\n            <span v-else>{{ header.text }}</span>\n        </template> -->\n\n        <!-- <template #item=\"{ item }\">\n            <tr :style=\"{color : getUrgent(item)}\">\n                <td>\n                    {{ item.raw.code }}\n                </td>\n                <td>\n                    {{ item.raw.date_com }}\n                </td>\n                <td>{{ item.raw.date_prevue_liv }}</td>\n                <td>{{ item.raw.nom_client }}</td>\n                <td>{{ item.raw.commentaire }}</td>\n                <td>{{ item.raw.axe }}</td>\n                <td>{{ item.raw.duree_atte_prep }}</td>\n                <td>{{ item.raw.resume }}</td>\n                <td>{{ item.raw.nbLigne }}</td>\n                <td>{{ item.raw.situationmag }}</td>\n                <td>{{ item.raw.actions }}</td>\n            </tr>\n        </template> -->\n        <!-- <span :style=\"{ color: item.raw.nbLigne > 3 ? 'green' : 'red' }\">{{ item.raw.date_com }}</span> -->\n    </v-data-table>\n</template>\n<script>\nimport { defineComponent } from 'vue';\nimport { VDataTable } from 'vuetify/labs/VDataTable';\nimport { useAlerteStore } from \"@/store/utils/alerte.js\"\nimport { ref, onMounted, onBeforeMount, computed } from 'vue';\nimport dayjs from 'dayjs';\nexport default defineComponent({\n    components: {\n        VDataTable,\n    },\n    emits: ['action1Item', 'action2Item', 'handleCheckboxClick'],\n    props: {\n        headers: Object,\n        items: Object,\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        action1: String,\n        action2: String,\n        titre_list: String,\n        itemslist: Object,\n        header_text: String,\n        alerte: String,\n        etape: String,\n        showAction1: {\n            type: Boolean,\n            default: false\n        },\n    },\n    defaults: {\n        VDataTable: {\n            fixedHeader: true,\n            noDataText: 'Pas de resultats',\n        },\n    },\n\n    setup(props, { emit }) {\n        // const m_date = ref(null);\n        // const useformatDate = useformatDate();\n        const storeAlert = useAlerteStore();\n        const loading = ref(false);\n        const alerte = ref('');\n        const action1PItem = (item) => {\n            emit('action1Item', item);\n        };\n        const action2PItem = (item) => {\n            emit('action2Item', item);\n        };\n        const handleCheckboxClick = (item) => {\n            emit('handleCheckboxClick', item);\n        };\n        const emitEvent = () => {\n            emit('my-alert', alerte);\n            emit('my-val', storeAlert.alertes.val)\n        };\n\n        const fetchAlerte = async () => {\n            storeAlert.params.code = props.etape;\n            if (props.etape) {\n                await storeAlert.fetchAlerte();\n                alerte.value = storeAlert.alertes.alerte;\n            }\n        }\n\n\n        const formatDateTime = (date) => {\n            if(date!==null && date!==''){\n                return dayjs(date).format('DD/MM/YYYY HH:mm');\n            } else {\n                return '';\n            }\n           \n        };\n\n        const formatDate = (date) => {\n            if(date!==null && date!==''){\n                return dayjs(date).format('DD/MM/YYYY');\n            } else {\n                return '';\n            }\n           \n        };\n\n        const getColor = (valeur) => {\n            if (valeur.trim() == \"OR\") return '#ff66ff';\n            else if (valeur.trim() == \"ARGENT\") return '#ffff00';\n            else if (valeur.trim() == \"BRONZE\") return '#99ffff';\n            else if (valeur.trim() == \"FER\") return '#c0c0c0';\n        };\n        onMounted(() => {\n            fetchAlerte();\n            emitEvent();\n\n        })\n\n        const getUrgent = (item) => {\n\n            if (item.raw.prioritaire == 1 && item.raw.province == 1 && item.raw.duree_atte_prep >= alerte.value) {\n                item.raw.urgent = 1\n\n            }\n            if ((item.raw.urgent + item.raw.aprendre) == 2) {\n                return '#FF0000';\n            }\n            else if (item.raw.urgent == 0 && item.raw.aprendre == 0 && item.raw.garde == 1) {\n                return '#ff9933';\n            }\n            else if (item.raw.urgent == 1 && item.raw.aprendre == 0) {\n                return '#00cc00';\n            }\n            else if (item.raw.urgent == 0 && item.raw.aprendre == 1) {\n                return '#0099ff';\n            }\n\n        };\n\n        return { action1PItem, action2PItem, getColor, getUrgent, fetchAlerte, emitEvent, handleCheckboxClick, formatDate,formatDateTime };\n    }\n\n\n\n    // getUrgent(item) {\n    //     if(item.raw.prioritaire=1 && item.raw.province==1 && item.raw.duree_atte_prep>= ){\n\n    //     }\n\n    // }\n});\n</script>\n  \n\n<style>\n.v-data-table.blue-header .v-table__wrapper>table>thead>tr th,\n.v-data-table.blue-header .v-table__wrapper>table tbody>tr th {\n    background-color: #b8b3cc;\n    white-space: nowrap;\n}\n\n/* .v-table > .v-table__wrapper > table > tbody > tr:nth-child(-n+2) td{\n      background: #e1eed7;\n    } */\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}